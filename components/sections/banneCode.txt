<template>
    <div class="bg-white text-black">
      <div>
        <div v-if="banner.items" class="relative w-full flex ">
          <carousel :autoplay="true" :autoplayInterval="3000" class="flex">
            <slide v-for="(item, i) in banner.items" :key="i">
              <div class="relative w-full image slider-item ">
                <nuxt-img
                  width="100%"
                  height="300"
                  class="object-cover w-full h-48 md:h-screen bg-gray-200 " 
                  :src="item.image ? item.image.src : $store.state.defaults.sliderImage" 
                  :alt="item.title" 
                />
                <div class="absolute bottom-0 flex p-2">
                  <span 
                    v-for="(x, y) in banner.items" 
                    :key="y" 
                    :class="{'bg-gray-300': y === activeIndex}" 
                    class="flex w-10 h-4 mx-1 bg-gray-50 rounded-full cursor-pointer" 
                    @click="animate(y)"
                  ></span>
                </div>
              </div>
            </slide>
          </carousel>
        </div>
  
        <div class="bg-bg_secendary gap-6 py-26.6px px-32 flex flex-col md:flex-row">
          <div class="w-full py-26.6px px-32">
            <h2 class="pb-15px font-tenor-sans tracking-0.2em text-3xl uppercase">Flash Sale</h2>
            <p class="pb-15px block tracking-1.7px text-13.6px">Get 20% off if you spend $120 or more!</p>
          </div>
          <div class="w-full flex py-26.6px px-32 uppercase items-center">
            <div class="px-16px">
              <h1 class="pb-4px font-tenor-sans tracking-0.2em text-3xl uppercase text-center">1</h1>
              <p class="tracking-1.7px text-12px">Day</p>
            </div>
            <div class="px-16px border-s-black border-s">
              <h1 class="pb-4px font-tenor-sans tracking-0.2em text-3xl uppercase text-center">1</h1>
              <p class="tracking-1.7px text-12px">Hours</p>
            </div>
            <div class="px-16px border-s-black border-s">
              <h1 class="pb-4px font-tenor-sans tracking-0.2em text-3xl uppercase text-center">1</h1>
              <p class="tracking-1.7px text-12px">Minutes</p>
            </div>
            <div class="px-16px border-s-black border-s">
              <h1 class="pb-4px font-tenor-sans tracking-0.2em text-3xl uppercase text-center">1</h1>
              <p class="tracking-1.7px text-12px">Seconds</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </template>
  
  <script>

  export default {
    data() {
      return {
        activeIndex: 0,
        banner: this.$settings.sections.banner,
        Carousel: null,
        Slide: null,
      };
    },
    mounted() {
      if (process.client) {
        const { Carousel, Slide } = require('vue-carousel');
        this.Carousel = Carousel; 
        this.Slide = Slide;
      }
    },
    methods: {
      animate(index) {
        this.activeIndex = index; // Update activeIndex to the clicked indicator
        clearTimeout(this.timeout); // Clear timeout if manual navigation occurs
      },
    },
  };
  </script>

  <style>
  .slider-item {
    position: relative ;
  }
  </style>
  